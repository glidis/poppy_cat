---
title: For loops with ggplot2
author: Glidis
date: '2018-05-11'
slug: for-loops-with-ggplot2
categories:
  - R
tags:
  - ggplot2
---



<div id="3412" class="section level3">
<h3>例如画3行4列12个图</h3>
<ul>
<li><p>当数据比较规范，且作图要求一致的时候，用<code>facet_wrap</code>和<code>facet_grid</code>就可以解决大多数问题，但需要注意搭配<code>facet_wrap(~variable, scales = 'free_y')</code>。</p></li>
<li>当其中某个图与其他图有不同时候，可以考虑先生成12张图，再利用<code>gridExtra::grid.arrange</code>整合在一起（另外可参考使用cowplow包）。此时for loop是一个比较自然的选择。分两种情况：
<ul>
<li>loop变量i不进入<code>aes</code>函数，针对data进行循环，例如利用i来限制每次loop的<code>ggplot(data='subset(.....)')</code>。</li>
<li>loop变量i进入<code>aes</code>函数，此时使用公用的<code>ggplot(data)</code>，此时不能使用<code>aes</code>函数，若i为string，需要使用<code>aes_string(x = 'year', y = i)</code>。</li>
</ul></li>
</ul>
</div>
